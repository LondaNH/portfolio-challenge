//tealium universal tag - utag.22 ut4.0.202204121810, Copyright 2022 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1};u.initialized=false;u.map={};u.extend=[];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={};for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
!(function(t,n){t[n]=t[n]||{nlsQ:function(e,o,c,r,s,i){return(r=(s=t.document).createElement("script")).async=1,r.src=("http:"===t.location.protocol?"http:":"https:")+"//cdn-gl.imrworldwide.com/conf/"+e+".js#name="+o+"&ns="+n,(i=s.getElementsByTagName("script")[0]).parentNode.insertBefore(r,i),t[n][o]=t[n][o]||{g:c||{},ggPM:function(e,c,r,s,i){(t[n][o].q=t[n][o].q||[]).push([e,c,r,s,i])}},t[n][o]}}})(window,"NOLBUNDLE");window.vtg=window.vtg||{};window.vtg.nielsen=(()=>{var I=Object.defineProperty;var R=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var F=n=>I(n,"__esModule",{value:!0});var S=(n,t)=>{for(var e in t)I(n,e,{get:t[e],enumerable:!0})},k=(n,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of C(t))!b.call(n,r)&&(e||r!=="default")&&I(n,r,{get:()=>t[r],enumerable:!(o=R(t,r))||o.enumerable});return n};var M=(n=>(t,e)=>n&&n.get(t)||(e=k(F({}),t,1),n&&n.set(t,e),e))(typeof WeakMap!="undefined"?new WeakMap:0),d=(n,t,e,o)=>{for(var r=o>1?void 0:o?R(t,e):t,i=n.length-1,m;i>=0;i--)(m=n[i])&&(r=(o?m(t,e,r):m(r))||r);return o&&r&&I(t,e,r),r};var ie={};S(ie,{Nielsen:()=>a});var c={};S(c,{AdBreakEnd:()=>w,AdBreakStart:()=>L,AdClick:()=>H,AdEnd:()=>U,AdError:()=>V,AdFirstQuartile:()=>q,AdMidQuartile:()=>K,AdPause:()=>B,AdProgress:()=>Q,AdResume:()=>j,AdSkip:()=>G,AdStalled:()=>J,AdStart:()=>X,AdThirdQuartile:()=>Y,AdobeData:()=>z,AviaJsReady:()=>W,BeforeUnload:()=>Z,BitrateChange:()=>$,BufferEnd:()=>_,BufferStart:()=>tt,CdnChange:()=>et,ChapterComplete:()=>ot,ChapterStart:()=>rt,CloudIdReady:()=>nt,ContentEnd:()=>st,ContentPause:()=>it,ContentPlaying:()=>at,ContentProgress:()=>ct,ContentResume:()=>pt,ContentSegmentEnd:()=>dt,ContentSegmentStart:()=>ft,ContentStart:()=>mt,CuePoint:()=>ut,DaiError:()=>Ot,DrmCreated:()=>lt,FatalError:()=>xt,Foreground:()=>It,Heartbeat:()=>ht,LiveUiStopped:()=>yt,PlayerError:()=>gt,PlayerState:()=>St,ResourceInterrupt:()=>Dt,SeekEnd:()=>vt,SeekStart:()=>Et,SessionEnd:()=>Tt,SessionIdReady:()=>Pt,SessionStart:()=>At,SessionTick:()=>Rt,StreamMetadata:()=>Nt});var w="e1",L="e2",H="e3",U="e4",V="e5",q="e6",K="e7",B="e8",Q="e9",j="e10",G="e11",J="e12",X="e13",Y="e14",z="e15",W="e16",Z="e17",$="e18",_="e19",tt="e20",et="e21",ot="e22",rt="e23",nt="e24",st="e25",it="e26",at="e27",ct="e28",pt="e29",dt="e30",ft="e31",mt="e32",ut="e33",lt="e34",xt="e35",It="e36",ht="e37",yt="e38",gt="e39",St="e40",Dt="e41",vt="e42",Et="e43",Tt="e44",At="e45",Nt="e46",Ot="e47",Pt="e48",Rt="e49";var f={};S(f,{ACCOUNTINFO:()=>bt,ADBREAKINFO:()=>Ft,ADINFO:()=>Mt,ADSERVERINFO:()=>kt,APISERVERHOST:()=>$t,APPINFO:()=>wt,AVIACHAPTERTRACKING:()=>Lt,CDNINFO:()=>Ht,CHAPTERINFO:()=>Ut,CONTENTINFO:()=>Vt,CUSTOMDATA:()=>qt,CUSTOMTAGINFO:()=>re,DATAFORMAT:()=>D,DATATYPE:()=>v,DEVICEINFO:()=>Kt,ERRORINFO:()=>Bt,EVENTINFO:()=>Qt,EVENTSPATH:()=>te,HBINFO:()=>jt,INITINFO:()=>Gt,MEDIAINFO:()=>Jt,METADATAINFO:()=>Xt,PLAYERINFO:()=>E,PLAYERSTATES:()=>Yt,QOEDATA:()=>zt,QOSINFO:()=>Wt,REQUESTFAILEDINFO:()=>Zt,SENDUNDEFINED:()=>A,SERVERINFO:()=>T,SESSIONINFO:()=>N,SESSIONSPATH:()=>_t,STATICINFO:()=>ee,TAGINFO:()=>oe});var bt="accountInfo",Ft="adBreakInfo",kt="adServerInfo",Mt="adInfo",wt="appInfo",Lt="aviaChapterTracking",Ht="cdnInfo",Ut="chapterInfo",Vt="contentInfo",qt="customData",D="dataFormat",v="dataType",Kt="deviceInfo",Bt="errorInfo",Qt="eventInfo",jt="hbInfo",Gt="initInfo",Jt="mediaInfo",Xt="metadataInfo",E="playerInfo",Yt="playerStates",zt="qoeData",Wt="qosInfo",Zt="requestFailedInfo",T="serverInfo",$t="apiServerHost",_t="sessionsPath",te="eventsPath",A="sendUndefined",N="sessionInfo",ee="staticInfo",oe="tagInfo",re="customTagInfo";function O(n){return t=>{t.prototype.dependency=n}}function p(n){return function(t,e,o){typeof o.value=="function"&&(typeof t.eventMap!="object"&&(t.eventMap={}),t.eventMap[n]||(t.eventMap[n]=o.value))}}var s=class{static get(t){try{return window[t]}catch(e){}}static find(t,e){e=e||window;let o;if(t.indexOf(".")>-1){let r=t.split("."),i=r.shift()||"",m=r.join(".");o=s.find(m,e[i])}else o=e[t];return o}static getSize(){let t=s.get("screen");return t&&t.width&&t.height?t.width+"x"+t.height:"n/a"}};var x=class{static debug(t,e){console.log("%c[ts] "+t,"color:black;font-size:11px;background:#53fa4d"),e&&console.log(e)}static warn(t){var e=console;e&&e.warn("[ts] "+t)}};x.enabled=!1;var u=class{static trim(t){return u.isDefined(t)?t.toString().trim():t}static isDefined(t){return!(typeof t=="undefined"||t==="undefined"||t===null||t==="")}static isTruthy(t){return u.isDefined(t)&&(typeof t=="boolean"&&t===!0||t==="true")}static toString(t){let e=s.get("JSON")||JSON;return e&&e.stringify?e.stringify(t):t.toString()}static toObject(t){let e=s.get("JSON")||JSON;return e&&e.parse?e.parse(t):t}static toMillisec(t){return isNaN(t)?t:Math.floor(t*1e3)}static toQs(t){let e=[];for(let i in t)e.push(i+"="+t[i]);let o=s.get("encodeURI"),r=e.join("&");return typeof o=="function"?o(r):r}static trimFwdSlash(t){return t.replace(/^\/+/,"")}};var h=class{constructor(){this.items=[];this.running=!1;this.maxLength=100}add(t){this.items.length>this.maxLength&&this.reset(),this.items.unshift(t)}each(t){if(this.running)return;this.running=!0;let e=this.items.length;for(;e--;){let o=this.items.pop();o&&t(o)}this.running=!1}reset(){this.items=[]}};var y=class{constructor(t){this.proxy=t;this.queue=new h;let e=t.facade.manifest.Settings;x.enabled=e.debug}onDispatch(t){this.dependency?(this.sdk||(this.sdk=s.get(this.dependency.name)),this.queue.add(t),this.flush()):this.dispatch(t)}flush(){this.dependency&&!this.sdk||this.queue.each(t=>{this.dispatch(t)})}dispatch(t){let o=this.eventMap[t.name];this.notification=t,o&&o.apply(this)}getData(){return this.proxy.facade.dataProxy.getData()}getSessionData(){return this.proxy.facade.manifest.SessionData}setSessionData(t,e){this.proxy.facade.setSessionData(t,e)}updateData(t){this.proxy.facade.dataProxy.update(t)}};var l=class{constructor(t){this.items={};let e=t.DataSource,o=(r,i)=>{this.items[r]=i||{}};e&&e.forEach(r=>{o(r.label,s.find(r.var))})}static getDefault(t){return l.instance||(l.instance=new l(t)),l.instance}};var g=class{constructor(t){this.receiver=t;this.keepUndef=!0;this.manifest=t.proxy.facade.manifest,this.params=t.proxy.config.params,this.dataType=this.params[v]||{},this.dataFormat=this.params[D]||{},this.setInfo(T),this.setInfo(N)}getData(){return this.receiver.getData()}getNode(t){return this.params[t]||null}map(t,e){return this.mapData(this.getNode(t)||{},e)}mapData(t,e){let o=this.receiver,r=e||o.getData(),i=l.getDefault(this.manifest).items;i.data=r,i.player=r[E]||{},i.config=this.params,i.session=this.receiver.getSessionData();let m=o.proxy.facade.dataProxy.mapData({source:i,map:t,type:this.dataType,format:this.dataFormat});return this.keepUndef?m:this.removeUndef(m)}removeUndef(t){let e={};return Object.keys(t).forEach(o=>{let r=t[o];r!=="undefined"&&(e[o]=r)}),e}setInfo(t){let e=this.getNode(t),o=this;e&&(o[t]=this.map(t),this.keepUndef=u.isTruthy(e[A]))}isAtLeast95(){let t=this.receiver.getData();return t&&t.isLive?!1:t.playhead>=t.duration*.95}};var P=class extends g{constructor(t){super(t);this.receiver=t}getPlayhead(){let t=this.getData();return t.isLive?t.utcSeconds:t.playhead}isVodOrDcr(){let t=this.getData(),e=t.streamType;return t.isDcrLive||e.toLowerCase()==="vod"}};var a=class extends y{constructor(){super(...arguments);this.hasChapter=!1}onRegister(){this.vo=new P(this),this.sdk=s.get("NOLBUNDLE")}onAdStart(){this.load()}onAdEnd(){this.stop()}onAdProgress(){this.progress()}onChapterStart(){this.hasChapter=!0,this.load()}onContentStart(){!this.hasChapter&&this.load()}onContentEnd(){this.stop()}onSessionStart(){this.start()}onSessionEnd(){this.end()}onContentProgress(){!this.vo.isVodOrDcr()||this.progress()}onPlayerError(){this.end()}onCuePoint(){let e=this.getData().id3Info,o=this.vo.getNode(f.SESSIONINFO)||this.vo.getNode(f.SERVERINFO);o&&e&&e.id===o.id3Owner&&this.sdkInstance.ggPM("sendID3",e.info)}start(){let t=this.vo.map(f.SESSIONINFO);!x.enabled&&t.nol_sdkDebug&&delete t.nol_sdkDebug,this.sdkInstance=this.sdk.nlsQ(t.appId,"nolInstance",t),this.vo.isVodOrDcr()||this.load()}load(){let t=this.getData().isAd?f.ADINFO:f.MEDIAINFO;this.sdkInstance.ggPM("loadMetadata",this.vo.map(t))}stop(){this.track("stop")}progress(){this.track("setPlayheadPosition")}end(){this.track("end"),this.hasChapter=!1}track(t){!this.sdkInstance||this.sdkInstance.ggPM(t,this.vo.getPlayhead())}onRemove(){this.vo=null,this.eventMap=null,this.sdk=null,this.sdkInstance=null}};d([p(c.AdStart)],a.prototype,"onAdStart",1),d([p(c.AdEnd)],a.prototype,"onAdEnd",1),d([p(c.AdProgress)],a.prototype,"onAdProgress",1),d([p(c.ChapterStart)],a.prototype,"onChapterStart",1),d([p(c.ContentStart)],a.prototype,"onContentStart",1),d([p(c.ContentEnd)],a.prototype,"onContentEnd",1),d([p(c.SessionStart)],a.prototype,"onSessionStart",1),d([p(c.SessionEnd)],a.prototype,"onSessionEnd",1),d([p(c.ContentProgress)],a.prototype,"onContentProgress",1),d([p(c.PlayerError),p(c.FatalError)],a.prototype,"onPlayerError",1),d([p(c.CuePoint)],a.prototype,"onCuePoint",1),a=d([O({name:"NOLBUNDLE",type:"object"})],a);return M(ie);})();}};utag.o[loader].loader.LOAD(id);})("22","cbsi.maxprepssite");}catch(error){utag.DB(error);}
